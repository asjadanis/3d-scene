{"version":3,"sources":["Scene.js","App.js","serviceWorker.js","index.js"],"names":["Scene","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","configureScene","bind","assertThisInitialized","destroyRenderer","start","stop","animate","renderScene","handleMouseClick","window","addEventListener","handleWindowResize","handleKeyDown","_this2","loadModel","car","name","position","set","initialPosition","x","y","z","rotateY","rotateX","scale","castShadow","receiveShadow","_this3","width","container","clientWidth","height","clientHeight","renderer","THREE","antialias","alpha","setPixelRatio","devicePixelRatio","shadowMap","enabled","gammaOutput","gammaFactor","type","scene","background","camera","add","skyBox","carsCounter","cars","setInterval","addCars","models","modelLoader","setTimeout","addBirds","plane","material","side","map","load","aoMap","displacementMap","normalMap","lightMap","roughness","normalScale","wrapS","wrapT","repeat","ground","rotation","Math","PI","ambLight","hemiLight","dirLight","shadow","mapSize","near","far","updateSpeed","setSize","appendChild","domElement","counter","min","max","ceil","floor","random","range","i","push","concat","clone","generateRandomNumber","geometry","cubeMaterials","cubeMaterial","sky","model","_this4","actions","GLTFLoader","object","mesh","traverse","item","isMesh","mixer","rotateZ","clock","animations","length","clip","action","clipAction","activeAction","keys","fadeIn","play","v1","v2","parseInt","pow","cbk","_this5","gltfLoader","birdActions","bird","birdActiveAction","frameId","requestAnimationFrame","cancelAnimationFrame","_this6","offset","index","distance","distanceVector","remove","getObjectByName","update","getDelta","includes","removeModels","render","_this7","innerWidth","innerHeight","aspect","updateProjectionMatrix","e","console","log","removeChild","forceContextLoss","context","_this8","react_default","a","createElement","ref","style","overflow","onClick","Component","App","src_Scene","Boolean","location","hostname","match","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.9b039e68.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport GLTFLoader from 'three-gltf-loader';\nimport * as THREE from 'three';\n\nclass Scene extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n\n    }\n    this.configureScene = this.configureScene.bind(this);\n    this.destroyRenderer = this.destroyRenderer.bind(this);\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this.animate = this.animate.bind(this);\n    this.renderScene = this.renderScene.bind(this);\n    this.handleMouseClick = this.handleMouseClick.bind(this);\n  }\n\n  componentWillMount(){\n    window.addEventListener('resize', this.handleWindowResize.bind(this));\n    window.addEventListener('keydown', this.handleKeyDown.bind(this));\n  }\n\n  componentDidMount(){\n    this.loadModel('Car/scene.gltf', 'car1', (car) => {\n      this.car = car;\n      this.car.name = 'car';\n      this.car.position.set(-2, 0, 95);\n      this.car.initialPosition = {x: -2, y: 0, z: 95};\n      this.car.rotateY(3.15)\n      this.car.rotateX(0);\n      this.car.scale.set(0.005, 0.005, 0.005);\n      this.car.castShadow = true;\n      this.car.receiveShadow = false;\n      this.configureScene();\n    });\n  }\n\n  configureScene(){\n    const width = this.container.clientWidth;\n    const height = this.container.clientHeight;\n\n    const renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\n    renderer.setPixelRatio(window.devicePixelRatio);\n    // renderer.setClearColor(0xfffafa, 1);\n    renderer.shadowMap.enabled = true;\n    renderer.gammaOutput = true;\n    renderer.gammaFactor = 2.2\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n    \n    const scene = new THREE.Scene();\n    // scene.fog = new THREE.FogExp2( 0xf0fff0, 0.004 );\n    scene.background = new THREE.Color('black');\n\n    const camera = new THREE.PerspectiveCamera(60, width/height, 1, 90000);\n    scene.add(camera);\n    \n    camera.position.z = 100;\n    camera.position.y = 2;\n    camera.position.x = 0;\n\n    this.camera = camera;\n    this.scene = scene;\n    this.renderer = renderer;\n\n    this.skyBox();\n    this.carsCounter = 0;\n    this.cars = [];\n    setInterval(()=>{this.addCars()}, 7000)\n    \n    this.models = ['bird1', 'bird2', 'bird3', 'phoenix1', 'phoenix2', 'phoenix3'];\n    this.modelLoader('flying_bird/scene.gltf', {x: 4, y: 3, z: 94}, this.models[0], {x: 19.2, y: 0, z: 0});\n    this.modelLoader('flying_bird/scene.gltf', {x: 4, y: 2.3, z: 94.5}, this.models[1], {x: 19.2, y: 0, z: 0});\n    this.modelLoader('flying_bird/scene.gltf', {x: 4.5, y: 3, z: 94.5}, this.models[2], {x: 19.2, y: 0, z: 0});\n    setTimeout(() => {\n      this.addBirds();\n    }, 5000)\n\n    let plane = new THREE.PlaneGeometry(20,1000,14,14);\n    let material = new THREE.MeshStandardMaterial({\n      side: THREE.DoubleSide, \n      map: new THREE.TextureLoader().load(\"Road/Albedo.jpg\"),\n      aoMap: new THREE.TextureLoader().load(\"Road/Ao.jpg\"),\n      displacementMap: new THREE.TextureLoader().load(\"Road/Displacement.jpg\"),\n      normalMap: new THREE.TextureLoader().load(\"Road/Normal.jpg\"), \n      lightMap: new THREE.TextureLoader().load(\"Road/Specular.jpg\"),\n      roughness: 1,\n      normalScale: new THREE.Vector2(0.6,0.6)\n\n    })\n\n    material.map.wrapS = THREE.RepeatWrapping;\n    material.map.wrapT = THREE.RepeatWrapping;\n    material.map.repeat.set(1, 10);\n\n    let ground = new THREE.Mesh(plane, material);\n    ground.receiveShadow = true;\n    ground.castShadow = false;\n    ground.rotation.x=-Math.PI/2; \n    ground.position.z = 100;\n    ground.position.y = -1;\n    this.ground = ground;\n    scene.add(ground);\n\n    let ambLight = new THREE.AmbientLight(0xffffff, 0.5);\n    ambLight.position.set(0, 100, 300);\n    camera.add(ambLight);\n\n    let hemiLight = new THREE.HemisphereLight(0xfffafa,0x000000, .9);\n    scene.add(hemiLight);\n    \n    let dirLight = new THREE.DirectionalLight(0xffffff, 2)\n    dirLight.position.set(100, 100, 100);\n    dirLight.castShadow = true;\n    dirLight.shadow.mapSize.width = 256;\n    dirLight.shadow.mapSize.height = 256;\n    dirLight.shadow.camera.near = 0.5;\n    dirLight.shadow.camera.far = 50 ;\n    scene.add(dirLight);\n    this.updateSpeed = 0.005;\n\n    renderer.setSize(width, height);\n    this.container.appendChild(renderer.domElement);\n    this.counter = 0;\n    this.start();\n  }\n\n  addBirds(){\n    this.modelLoader('phoenix_bird/scene.gltf', {x: -35, y: 10, z: 80}, this.models[3], {x: 0, y: 1, z: 0}, {x: 0.01, y: 0.01, z: 0.01});\n    this.modelLoader('phoenix_bird/scene.gltf', {x: -45, y: 13, z: 85}, this.models[4], {x: 0, y: 1, z: 0}, {x: 0.01, y: 0.01, z: 0.01});\n    this.modelLoader('phoenix_bird/scene.gltf', {x: -50, y: 8, z: 80}, this.models[5], {x: 0, y: 1, z: 0}, {x: 0.01, y: 0.01, z: 0.01});\n  }\n\n  generateRandomNumber(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n\n  addCars(){\n    let numCars = 1;\n    let range = [-2, 2];\n    this.carsCounter += 1;\n    for (let i = 0; i < numCars; i++){\n      this.cars.push(`car${this.carsCounter}`);\n      this.state[`car${this.carsCounter}`] = this.car.clone();\n      this.state[`car${this.carsCounter}`].name = `car${this.carsCounter}`;\n      this.state[`car${this.carsCounter}`].position.x = range[this.generateRandomNumber(0,1)];\n      this.state[`car${this.carsCounter}`].position.z = Math.random() * (100 - (95)) + (95);\n      this.scene.add(this.state[`car${this.carsCounter}`]);\n    }\n  }\n\n  skyBox(){\n    let geometry = new THREE.CubeGeometry(9000,9000,9000);\n    var cubeMaterials = [\n      new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( \"Skybox/nightsky_ft.png\" ), side: THREE.DoubleSide }),\n      new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( 'Skybox/nightsky_bk.png' ), side: THREE.DoubleSide }),\n      new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( 'Skybox/nightsky_up.png' ), side: THREE.DoubleSide }),\n      new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( 'Skybox/nightsky_dn.png' ), side: THREE.DoubleSide }),\n      new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( 'Skybox/nightsky_rt.png' ), side: THREE.DoubleSide }),\n      new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( 'Skybox/nightsky_lf.png' ), side: THREE.DoubleSide })\n    ];\n  \n    var cubeMaterial = new THREE.MeshFaceMaterial( cubeMaterials );\n    this.sky = new THREE.Mesh( geometry, cubeMaterial );\n    this.scene.add(this.sky);\n  }\n\n\n  modelLoader(model, position, name, rotation, scale){\n    this.state[name] = {};\n    this.state[name].actions = {};\n    let gltfLoader = new GLTFLoader();\n    gltfLoader.load(model, object => {\n      this.mesh = object.scene;\n      this.mesh.name = name;\n      this.mesh.traverse(item => {\n        if (item.isMesh){\n          item.castShadow = true;\n        }\n      });\n      this.state[name].mixer = new THREE.AnimationMixer(this.mesh);\n      this.state[name].initialPosition = position;\n      this.state[name].mesh = this.mesh;\n      if (rotation){\n        this.state[name].mesh.rotateX(rotation.x);\n        this.state[name].mesh.rotateY(rotation.y);\n        this.state[name].mesh.rotateZ(rotation.z);\n      }\n      if (scale){\n        this.state[name].mesh.scale.set(scale.x, scale.y, scale.z);\n      }\n      this.state[name].clock = new THREE.Clock();\n      for (var i = 0; i < object.animations.length; i++){\n        var clip = object.animations[i];\n        var action =  this.state[name].mixer.clipAction(clip);\n        this.state[name].actions[clip.name] = action;\n      }\n      this.state[name].activeAction = this.state[name].actions[Object.keys(this.state[name].actions)[0]];\n      if (this.state[name].activeAction){\n        this.state[name].activeAction.fadeIn(0.5);\n        this.state[name].activeAction.play();\n      }\n      this.object = this.mesh;\n      this.mesh.position.set(position.x, position.y, position.z)\n      this.scene.add(this.mesh);  \n    });\n  }\n\n  distanceVector(v1, v2){\n    return ( parseInt((Math.pow( (v1.x - v2.x), 2) ) + ( (Math.pow( (v1.y - v2.y), 2)) ) + ( (Math.pow( (v1.z - v2.z), 2)) ) ));\n  }\n\n  loadModel(model, name, cbk){\n    let gltfLoader = new GLTFLoader();\n    this.birdActions = {};\n    gltfLoader.load(model, object => {\n      this.bird = object.scene;\n      this.bird.name = name;\n      this.bird.traverse(item => {\n        if (item.isMesh){\n          item.castShadow = true;\n        }\n      });\n      this.mixer = new THREE.AnimationMixer(this.bird);\n      this.clock = new THREE.Clock();\n      for (var i = 0; i < object.animations.length; i++){\n        var clip = object.animations[i];\n        var action =  this.mixer.clipAction(clip);\n        this.birdActions[clip.name] = action;\n      }\n      this.birdActiveAction = this.birdActions[Object.keys(this.birdActions)[0]];\n      if (this.birdActiveAction){\n        this.birdActiveAction.fadeIn(0.5);\n        this.birdActiveAction.play();\n      }\n      cbk(this.bird);  \n    });\n  }\n\n  start(){\n    if (!this.frameId){\n      this.frameId = requestAnimationFrame(this.animate);\n    }\n  }\n\n  stop(){\n    cancelAnimationFrame(this.frameId)\n  }\n\n  animate(){\n    this.frameId = requestAnimationFrame(this.animate);\n    this.ground.material.map.offset.y += this.updateSpeed;\n    if (this.cars && this.cars.length > 0){\n      this.cars.map( (car, index) => {\n        let increment = 0.1\n        this.state[car].position.set(this.state[car].position.x, this.state[car].position.y, this.state[car].position.z - (increment))\n        let distance = this.distanceVector(this.state[car].position, new THREE.Vector3(this.ground.position.x, this.ground.position.y, this.ground.position.z - 200))\n        if ( distance > 10  && distance < 30 ){\n          this.scene.remove(this.scene.getObjectByName(car)); \n        }\n      })\n    }\n    this.models.map(model => {\n      if (this.state[model] && this.state[model].mixer && this.state[model].clock){\n        this.counter += 1;\n        this.state[model].mixer.update(this.state[model].clock.getDelta());\n        if (model.includes('phoenix')){\n          this.state[model].mesh.position.set(this.state[model].mesh.position.x + 1, this.state[model].mesh.position.y, this.state[model].mesh.position.z - 1);\n        }\n        if(this.counter > 5000){\n          this.removeModels();\n          this.counter = 0;\n          this.addBirds();\n        }\n      }\n    })\n    this.renderScene();\n  }\n\n  renderScene(){\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  removeModels(){\n    this.models.map( (model,index) => {\n      if (model.includes('phoenix')){\n        this.scene.remove(this.scene.getObjectByName(model));\n        this.state[model].mesh.position.set(this.state[model].initialPosition.x, this.state[model].initialPosition.y, this.state[model].initialPosition.z)\n      }\n    })\n  }\n\n  componentWillUnmount(){\n    this.destroyRenderer();\n  }\n\n  handleWindowResize(){\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.camera.aspect = window.innerWidth / window.innerHeight;\n    this.camera.updateProjectionMatrix();\n  }\n\n  handleKeyDown(e){\n    // if (e.keyCode === 37){   //left arrow\n    //   console.log('%c left arrow: ', 'color: dodgerblue');\n    //   this.state['bird1'].mesh.position.set(this.state['bird1'].mesh.position.x - 0.1, this.state['bird1'].mesh.position.y, this.state['bird1'].mesh.position.z)\n    //   this.camera.position.set(this.camera.position.x - 0.1, this.camera.position.y, this.camera.position.z)\n      \n    // } \n    // else if (e.keyCode === 39) { //right arrow\n    //   console.log('%c right arrow: ', 'color: orange');\n    //   this.state['bird1'].mesh.position.set(this.state['bird1'].mesh.position.x + 0.1, this.state['bird1'].mesh.position.y, this.state['bird1'].mesh.position.z)\n    //   this.camera.position.set(this.camera.position.x + 0.1, this.camera.position.y, this.camera.position.z)\n    // }\n    // else if (e.keyCode === 38) { //up arow\n    //   console.log('%c Up arrow: ', 'color: orange');\n    //   this.state['bird1'].mesh.position.set(this.state['bird1'].mesh.position.x, this.state['bird1'].mesh.position.y, this.state['bird1'].mesh.position.z - 0.1)\n    //   this.camera.position.set(this.camera.position.x, this.camera.position.y, this.camera.position.z - 0.1)\n    // }\n    // else if (e.keyCode === 40) { //down arow\n    //   console.log('%c Down arrow: ', 'color: orange');\n    //   this.state['bird1'].mesh.position.set(this.state['bird1'].mesh.position.x, this.state['bird1'].mesh.position.y, this.state['bird1'].mesh.position.z + 0.1)\n    //   this.camera.position.set(this.camera.position.x, this.camera.position.y, this.camera.position.z + 0.1)\n    // }\n  }\n\n  handleMouseClick(e){\n    console.log('%c Click: ', 'color: green');\n  }\n\n  destroyRenderer(){\n    this.container.removeChild(this.destroyRenderer.domElement);\n    this.renderer.forceContextLoss();\n    this.renderer.context = null;\n    this.renderer.domElement = null;\n    this.renderer = null;\n  }\n\n  render(){\n    return(\n      <div \n        ref={(container) => {this.container = container}} \n        style={{ position: 'absolute', width: '100%', height: '100%', overflow: 'hidden'}} \n        onClick={this.handleMouseClick}\n      >\n      </div>\n    );\n  }\n}\n\nexport default Scene;","import React, { Component } from 'react';\nimport Scene from './Scene';\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <Scene />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}