(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),o=a(10),s=a.n(o),r=(a(16),a(3)),c=a(4),d=a(6),h=a(5),l=a(7),u=a(1),m=a(8),p=a.n(m),w=a(0),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={},a.configureScene=a.configureScene.bind(Object(u.a)(Object(u.a)(a))),a.destroyRenderer=a.destroyRenderer.bind(Object(u.a)(Object(u.a)(a))),a.start=a.start.bind(Object(u.a)(Object(u.a)(a))),a.stop=a.stop.bind(Object(u.a)(Object(u.a)(a))),a.animate=a.animate.bind(Object(u.a)(Object(u.a)(a))),a.renderScene=a.renderScene.bind(Object(u.a)(Object(u.a)(a))),a.handleMouseClick=a.handleMouseClick.bind(Object(u.a)(Object(u.a)(a))),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowResize.bind(this)),window.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"componentDidMount",value:function(){var e=this;this.loadModel("Car/scene.gltf","car1",function(t){e.car=t,e.car.name="car",e.car.position.set(-2,0,95),e.car.initialPosition={x:-2,y:0,z:95},e.car.rotateY(3.15),e.car.rotateX(0),e.car.scale.set(.005,.005,.005),e.car.castShadow=!0,e.car.receiveShadow=!1,e.configureScene()})}},{key:"configureScene",value:function(){var e=this,t=this.container.clientWidth,a=this.container.clientHeight,n=new w.WebGLRenderer({antialias:!0,alpha:!0});n.setPixelRatio(window.devicePixelRatio),n.shadowMap.enabled=!0,n.gammaOutput=!0,n.gammaFactor=2.2,n.shadowMap.type=w.PCFSoftShadowMap;var i=new w.Scene;i.background=new w.Color("black");var o=new w.PerspectiveCamera(60,t/a,1,9e4);i.add(o),o.position.z=100,o.position.y=2,o.position.x=0,this.camera=o,this.scene=i,this.renderer=n,this.skyBox(),this.carsCounter=0,this.cars=[],setInterval(function(){e.addCars()},7e3),this.models=["bird1","bird2","bird3","phoenix1","phoenix2","phoenix3"],this.modelLoader("flying_bird/scene.gltf",{x:4,y:3,z:94},this.models[0],{x:19.2,y:0,z:0}),this.modelLoader("flying_bird/scene.gltf",{x:4,y:2.3,z:94.5},this.models[1],{x:19.2,y:0,z:0}),this.modelLoader("flying_bird/scene.gltf",{x:4.5,y:3,z:94.5},this.models[2],{x:19.2,y:0,z:0}),setTimeout(function(){e.addBirds()},5e3);var s=new w.PlaneGeometry(20,1e3,14,14),r=new w.MeshStandardMaterial({side:w.DoubleSide,map:(new w.TextureLoader).load("Road/Albedo.jpg"),aoMap:(new w.TextureLoader).load("Road/Ao.jpg"),displacementMap:(new w.TextureLoader).load("Road/Displacement.jpg"),normalMap:(new w.TextureLoader).load("Road/Normal.jpg"),lightMap:(new w.TextureLoader).load("Road/Specular.jpg"),roughness:1,normalScale:new w.Vector2(.6,.6)});r.map.wrapS=w.RepeatWrapping,r.map.wrapT=w.RepeatWrapping,r.map.repeat.set(1,10);var c=new w.Mesh(s,r);c.receiveShadow=!0,c.castShadow=!1,c.rotation.x=-Math.PI/2,c.position.z=100,c.position.y=-1,this.ground=c,i.add(c);var d=new w.AmbientLight(16777215,.5);d.position.set(0,100,300),o.add(d);var h=new w.HemisphereLight(16775930,0,.9);i.add(h);var l=new w.DirectionalLight(16777215,2);l.position.set(100,100,100),l.castShadow=!0,l.shadow.mapSize.width=256,l.shadow.mapSize.height=256,l.shadow.camera.near=.5,l.shadow.camera.far=50,i.add(l),this.updateSpeed=.005,n.setSize(t,a),this.container.appendChild(n.domElement),this.counter=0,this.start()}},{key:"addBirds",value:function(){this.modelLoader("phoenix_bird/scene.gltf",{x:-35,y:10,z:80},this.models[3],{x:0,y:1,z:0},{x:.01,y:.01,z:.01}),this.modelLoader("phoenix_bird/scene.gltf",{x:-45,y:13,z:85},this.models[4],{x:0,y:1,z:0},{x:.01,y:.01,z:.01}),this.modelLoader("phoenix_bird/scene.gltf",{x:-50,y:8,z:80},this.models[5],{x:0,y:1,z:0},{x:.01,y:.01,z:.01})}},{key:"generateRandomNumber",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},{key:"addCars",value:function(){var e=[-2,2];this.carsCounter+=1;for(var t=0;t<1;t++)this.cars.push("car".concat(this.carsCounter)),this.state["car".concat(this.carsCounter)]=this.car.clone(),this.state["car".concat(this.carsCounter)].name="car".concat(this.carsCounter),this.state["car".concat(this.carsCounter)].position.x=e[this.generateRandomNumber(0,1)],this.state["car".concat(this.carsCounter)].position.z=5*Math.random()+95,this.scene.add(this.state["car".concat(this.carsCounter)])}},{key:"skyBox",value:function(){var e=new w.CubeGeometry(9e3,9e3,9e3),t=[new w.MeshBasicMaterial({map:(new w.TextureLoader).load("Skybox/nightsky_ft.png"),side:w.DoubleSide}),new w.MeshBasicMaterial({map:(new w.TextureLoader).load("Skybox/nightsky_bk.png"),side:w.DoubleSide}),new w.MeshBasicMaterial({map:(new w.TextureLoader).load("Skybox/nightsky_up.png"),side:w.DoubleSide}),new w.MeshBasicMaterial({map:(new w.TextureLoader).load("Skybox/nightsky_dn.png"),side:w.DoubleSide}),new w.MeshBasicMaterial({map:(new w.TextureLoader).load("Skybox/nightsky_rt.png"),side:w.DoubleSide}),new w.MeshBasicMaterial({map:(new w.TextureLoader).load("Skybox/nightsky_lf.png"),side:w.DoubleSide})],a=new w.MeshFaceMaterial(t);this.sky=new w.Mesh(e,a),this.scene.add(this.sky)}},{key:"modelLoader",value:function(e,t,a,n,i){var o=this;this.state[a]={},this.state[a].actions={},(new p.a).load(e,function(e){o.mesh=e.scene,o.mesh.name=a,o.mesh.traverse(function(e){e.isMesh&&(e.castShadow=!0)}),o.state[a].mixer=new w.AnimationMixer(o.mesh),o.state[a].initialPosition=t,o.state[a].mesh=o.mesh,n&&(o.state[a].mesh.rotateX(n.x),o.state[a].mesh.rotateY(n.y),o.state[a].mesh.rotateZ(n.z)),i&&o.state[a].mesh.scale.set(i.x,i.y,i.z),o.state[a].clock=new w.Clock;for(var s=0;s<e.animations.length;s++){var r=e.animations[s],c=o.state[a].mixer.clipAction(r);o.state[a].actions[r.name]=c}o.state[a].activeAction=o.state[a].actions[Object.keys(o.state[a].actions)[0]],o.state[a].activeAction&&(o.state[a].activeAction.fadeIn(.5),o.state[a].activeAction.play()),o.object=o.mesh,o.mesh.position.set(t.x,t.y,t.z),o.scene.add(o.mesh)})}},{key:"distanceVector",value:function(e,t){return parseInt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))}},{key:"loadModel",value:function(e,t,a){var n=this,i=new p.a;this.birdActions={},i.load(e,function(e){n.bird=e.scene,n.bird.name=t,n.bird.traverse(function(e){e.isMesh&&(e.castShadow=!0)}),n.mixer=new w.AnimationMixer(n.bird),n.clock=new w.Clock;for(var i=0;i<e.animations.length;i++){var o=e.animations[i],s=n.mixer.clipAction(o);n.birdActions[o.name]=s}n.birdActiveAction=n.birdActions[Object.keys(n.birdActions)[0]],n.birdActiveAction&&(n.birdActiveAction.fadeIn(.5),n.birdActiveAction.play()),a(n.bird)})}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){var e=this;this.frameId=requestAnimationFrame(this.animate),this.ground.material.map.offset.y+=this.updateSpeed,this.cars&&this.cars.length>0&&this.cars.map(function(t,a){e.state[t].position.set(e.state[t].position.x,e.state[t].position.y,e.state[t].position.z-.1);var n=e.distanceVector(e.state[t].position,new w.Vector3(e.ground.position.x,e.ground.position.y,e.ground.position.z-200));n>10&&n<30&&e.scene.remove(e.scene.getObjectByName(t))}),this.models.map(function(t){e.state[t]&&e.state[t].mixer&&e.state[t].clock&&(e.counter+=1,e.state[t].mixer.update(e.state[t].clock.getDelta()),t.includes("phoenix")&&e.state[t].mesh.position.set(e.state[t].mesh.position.x+1,e.state[t].mesh.position.y,e.state[t].mesh.position.z-1),e.counter>5e3&&(e.removeModels(),e.counter=0,e.addBirds()))}),this.renderScene()}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"removeModels",value:function(){var e=this;this.models.map(function(t,a){t.includes("phoenix")&&(e.scene.remove(e.scene.getObjectByName(t)),e.state[t].mesh.position.set(e.state[t].initialPosition.x,e.state[t].initialPosition.y,e.state[t].initialPosition.z))})}},{key:"componentWillUnmount",value:function(){this.destroyRenderer()}},{key:"handleWindowResize",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}},{key:"handleKeyDown",value:function(e){}},{key:"handleMouseClick",value:function(e){console.log("%c Click: ","color: green")}},{key:"destroyRenderer",value:function(){this.container.removeChild(this.destroyRenderer.domElement),this.renderer.forceContextLoss(),this.renderer.context=null,this.renderer.domElement=null,this.renderer=null}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{ref:function(t){e.container=t},style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"},onClick:this.handleMouseClick})}}]),t}(n.Component),b=function(e){function t(){return Object(r.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(y,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.9b039e68.chunk.js.map